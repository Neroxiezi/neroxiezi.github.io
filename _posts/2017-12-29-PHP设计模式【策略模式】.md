---
layout: post
title:  "PHP设计模式之策略模式"
date:   2017-12-29 9:00:02 +0800
author: "南丞"
desc: " 设计模式（Design Pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。设计模式于己于他人于系统都是多赢的；设计模式使代码编制真正工程化；设计模式是软件工程的基石脉络，如同大厦的结构一样。"

in_head: "<style> .article-content p{
  text-indent: 2em;
  line-height: 1.75rem;
}</style>"
---
#  策略模式

```php
<?php

use pf\arr\PFarr;

header("Content-type: text/html; charset=utf-8");
require_once './vendor/autoload.php';


abstract class RotateItem {
    public abstract function Algorithm();
    public abstract function Behavior();
}
/**
 * 策略角色类 - 算法1
 */
class AItem extends RotateItem{
    public function Algorithm(){
        PFarr::dd('算法1：我爱计算，头脑好好！<br/>');
    }
    function Behavior(){
        echo '算法1：我爱洗澡，皮肤好好！<br/>';
    }
}
/**
 * 策略角色类 - 算法2
 */
class BItem extends RotateItem{
    public function Algorithm(){
        echo '算法2：我爱计算，头脑好好！<br/>';
    }
    function Behavior(){
        echo '算法2：我爱洗澡，皮肤好好！<br/>';
    }
}
/**
 * 环境角色类 - 通过这个类调用对应的策略算法
 */
class ContextItem{
    private $item; // 用户存储一个策略类的引用，最终返还给客户端调用。
    public function getItem($item_name, $fun_name){
        # 1、通过系统 ReflectionClass方法获得类的各项参数
        $class      = new ReflectionClass($item_name);
        # 2、再通过系统 newInstance方法实例化一个类
        $this->item = $class->newInstance();
        # 3、根据方法名调用对应的算法或行为
        $this->item->$fun_name();
    }
}
# 实例DEMO
$obj = new ContextItem();
$obj->getItem('BItem','Algorithm');
$obj->getItem('AItem','Behavior');
```
